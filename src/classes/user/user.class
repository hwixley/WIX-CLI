#!/bin/bash

# declare -A user
# declare -a user_lines user_lines=()
# while IFS='' read -r line || [[ -n "$line" ]]; do
#     user_lines+=("$line")
# done < "$WIX_DATA_DIR/git-user.txt"
# for line in "${user_lines[@]}"; do
# 	key=${line%%=*}
# 	value=${line#*=}
# 	user[$key]=$value
# done

# user.user(){
#     return $user
# }

# declare -A myorgs
# declare -a org_lines org_lines=()
# while IFS='' read -r line || [[ -n "$line" ]]; do
#     org_lines+=("$line")
# done < "$WIX_DATA_DIR/git-orgs.txt"
# for line in "${org_lines[@]}"; do
# 	key=${line%%=*}
# 	value=${line#*=}
# 	myorgs[$key]=$value
# done

# user.orgs(){
#     return $myorgs
# }

# declare -A mydirs
# declare -a dir_lines dir_lines=()
# while IFS='' read -r line || [[ -n "$line" ]]; do
#     dir_lines+=("$line")
# done < "$WIX_DATA_DIR/dir-aliases.txt"
# for line in "${dir_lines[@]}"; do
# 	key=${line%%=*}
# 	value=${line#*=}
# 	mydirs[$key]=$value
# done

wixd.dirs(){
    # declare -A mydirs
    echo "dirs..."
    declare -a dir_lines dir_lines=()
    while IFS='' read -r line || [[ -n "$line" ]]; do
        dir_lines+=("$line")
    done < "$WIX_DATA_DIR/dir-aliases.txt"
    for line in "${dir_lines[@]}"; do
        key=${line%%=*}
        value=${line#*=}
        if [[ "$key" == "$1" ]]; then
            echo "$value"
            return 0
        fi
        # mydirs[$key]=$value
    done
    # echo "${mydirs[@]}"
    # echo "1: $1"
    # echo "2: $2"
    # echo "${mydirs[$2]}"
}

user.direxists() {
    dir=$(wixd.dirs "$1")
    if [[ "$dir" != "" ]]; then
        return 0
    else
        return 1
    fi
}

user.scripts(){
    declare -A myscripts
    declare -a script_lines script_lines=()
    while IFS='' read -r line || [[ -n "$line" ]]; do
        script_lines+=("$line")
    done < "$WIX_DATA_DIR/run-configs.txt"
    for line in "${script_lines[@]}"; do
        key=${line%%=*}
        value=${line#*=}
        myscripts[$key]=$value
    done

    return $myscripts
}

