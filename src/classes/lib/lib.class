#!/bin/bash

scripts_csv_file="${WYX_DIR}/src/data/arg_scripts.csv"
categories_csv_file="${WYX_DIR}/src/data/arg_categories.csv"

lib.csv.scripts.query(){
    csvsql --query "select $1 from arg_scripts $2" "${scripts_csv_file}"
}

lib.csv.categories.query(){
    csvsql --query "select $1 from arg_categories $2" "${categories_csv_file}"
}

lib.csv.query.id(){
    IFS=$'\n' lines=($(lib.csv.query "$1" "where id='$2'"))
    if sys.shell.zsh; then
        echo "${lines[2]}"
    else
        echo "${lines[1]}"
    fi
}

lib.csv.all(){
    IFS=$'\n' lines=($(lib.csv.query "id"))
    for line in "${lines[@]:1}"; do
        echo "$line"
    done
}

lib.csv.name(){
    lib.csv.query.id "name" "$1"
}

lib.csv.path(){
    lib.csv.query.id "path" "$1"
}

lib.csv.public(){
    lib.csv.query.id "public" "$1"
}

lib.csv.args(){
    lib.csv.query.id "args" "$1"
}